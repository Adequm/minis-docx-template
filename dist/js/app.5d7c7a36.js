(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},r={app:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/minis-docx-template/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"1c7c":function(e,t,i){"use strict";i("edef")},"26d7":function(e,t,i){},"41e8":function(e,t,i){"use strict";i("82b2")},"52cb":function(e,t,i){"use strict";i("88ab")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container",class:{fullscreen:e.isFullscreen},style:{height:e.innerHeight+"px",maxWidth:e.isDesktop?e.containerWidth+"px":"100vw",maxHeight:e.isDesktop?e.containerHeight+"px":"100vh"}},[e.isPageLoad?i("div",{staticClass:"minis__wrapper"},[e.isDesktop?i("SettingsDesktop",{attrs:{themeIcon:e.themeMain.icon},on:{switchTheme:e.switchTheme,switchLang:e.switchLang,switchFullscreen:e.switchFullscreen},model:{value:e.isClosedSettings,callback:function(t){e.isClosedSettings=t},expression:"isClosedSettings"}}):e._e(),i("LayoutContent",{ref:"layoutContent",style:{filter:e.openedModalName?"blur(2px)":"none"},attrs:{appWidth:e.appWidth,appHeight:e.appHeight,bodyHeight:e.innerHeight,isDesktop:e.isDesktop,isWidthMore768:e.isWidthMore768},on:{switchSettings:function(t){e.isClosedSettings=!e.isClosedSettings},updateInputFocus:function(t){e.onInputFocus=t},openModal:function(t){e.openedModalName=t}}}),i("AppModal",{attrs:{isRoundedBorder:e.isWidthMore768&&!e.isFullscreen},model:{value:e.openedModalName,callback:function(t){e.openedModalName=t},expression:"openedModalName"}},["settings"==e.openedModalName?i("SettingsMobile",{attrs:{themeIcon:e.themeMain.icon,isWidthMore768:e.isWidthMore768},on:{switchTheme:e.switchTheme,switchLang:e.switchLang,switchFullscreen:e.switchFullscreen}}):e._e()],1),e.isDesktop?i("div",{staticClass:"resize_button",on:{mousedown:function(t){return t.preventDefault(),e.startResize.apply(null,arguments)},dblclick:function(t){return t.preventDefault(),e.autoResize.apply(null,arguments)}}}):e._e(),e.isDesktop?i("a",{staticClass:"minis",attrs:{href:"https://adequm.github.io/minis",target:"_blank"},domProps:{textContent:e._s("Minis")}}):e._e()],1):i("Icon",{staticClass:"loader",attrs:{type:"time-oclock",size:100,rotate:""}})],1)},a=[],s=i("5530"),o=i("2ef0"),l=i.n(o),c=i("1da1"),u=i("3835"),d=(i("96cf"),i("07ac"),i("d3b7"),i("159b"),i("4fad"),i("2f62")),p={name:"App",data:function(){return{isPageLoad:!1}},watch:{translateOfMinis:{deep:!0,immediate:!0,handler:function(e){Object.values(e).length&&(document.title=this.translate("title"))}},themeMain:{deep:!0,handler:"themeMainInit"},themeSpecial:{deep:!0,handler:"themeSpecialInit"},themesJSON:{deep:!0,handler:"themesJSONInit"}},computed:Object(s["a"])(Object(s["a"])({},Object(d["c"])(["themeMain","themeSpecialName","themeSpecial"])),Object(d["e"])({minisTheme:function(e){return e.minis.minisTheme},minisLang:function(e){return e.minis.minisLang},themesJSON:function(e){return e.minis.themesJSON},minisJSON:function(e){return e.minis.minisJSON},translateJSON:function(e){return e.minis.translateJSON}})),methods:Object(s["a"])(Object(s["a"])({},Object(d["d"])({switchTheme:function(e,t){return e("switchTheme",t)},switchLang:function(e,t){return e("switchLang",t)},initMinis:function(e,t){return e("initMinis",t)}})),{},{themeMainInit:function(){if(!this.themeMain)return this.switchTheme("main");Object.entries(this.themeMain.colors).forEach((function(e){var t=Object(u["a"])(e,2),i=t[0],n=t[1];document.body.style.setProperty("--".concat(i),n)}))},themeSpecialInit:function(){if(!this.themeSpecial)return this.switchTheme("special");document.body.style.setProperty("--special-color",this.themeSpecial.normal)},themesJSONInit:function(){Object.entries(this.themesJSON.default||[]).forEach((function(e){var t=Object(u["a"])(e,2),i=t[0],n=t[1];document.body.style.setProperty("--".concat(i,"-color"),n)}))},isExistMinisData:function(){return l.a.size(this.themesJSON)&&l.a.size(this.minisJSON)&&l.a.size(this.translateJSON)},getMinisOptions:function(){var e=this,t="https://adequm.github.io/minis";return new Promise(function(){var i=Object(c["a"])(regeneratorRuntime.mark((function i(n){var r,a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,fetch("".concat(t,"/translateJSON.json")).then((function(e){return e.json()}));case 3:return r=i.sent,i.next=6,fetch("".concat(t,"/minisJSON.json")).then((function(e){return e.json()}));case 6:return a=i.sent,i.next=9,fetch("".concat(t,"/themesJSON.json")).then((function(e){return e.json()}));case 9:s=i.sent,n({translateJSON:r,minisJSON:a,themesJSON:s}),i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](0),setTimeout(Object(c["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isExistMinisData()&&(e.themeMainInit(),e.themeSpecialInit(),e.themesJSONInit(),e.isPageLoad=!0),t.next=3,e.getMinisOptions();case 3:i=t.sent,n(i);case 5:case"end":return t.stop()}}),t)}))),2e3);case 16:case"end":return i.stop()}}),i,null,[[0,13]])})));return function(e){return i.apply(this,arguments)}}())}}),created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMinisOptions();case 2:i=t.sent,e.initMinis(i),e.isPageLoad=!0;case 5:case"end":return t.stop()}}),t)})))()}},h={data:function(){return{minContainerWidth:300,minContainerHeight:560,containerWidth:null,containerHeight:null,innerHeight:null,innerWidth:null,startResizeX:null,startResizeY:null,startResizeWidth:null,startResizeHeight:null,resizeHash:null,onInputFocus:!1}},watch:{isFullscreen:"resizeContainer",innerHeight:"resizeContainer",innerWidth:"resizeContainer"},computed:Object(s["a"])(Object(s["a"])({},Object(d["e"])(["isFullscreen"])),{},{isWidthMore768:function(e){return e.innerWidth>=768},isDesktop:function(e){return e.isWidthMore768&&!e.isFullscreen},appWidth:function(e){return e.isDesktop?e.containerWidth:e.innerWidth},appHeight:function(e){return e.isDesktop?e.containerHeight:e.innerHeight},maxContainerWidth:function(e){return e.innerWidth-180},maxContainerHeight:function(e){return e.innerHeight-100},isMinContainerWidth:function(e){return e.containerWidth===e.minContainerWidth},isMaxContainerWidth:function(e){return e.containerWidth===e.maxContainerWidth},isMinContainerHeight:function(e){return e.containerHeight===e.minContainerHeight},isMaxContainerHeight:function(e){return e.containerHeight===e.maxContainerHeight}}),methods:{resizeContainer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.containerWidth,i=this.minContainerWidth,n=this.maxContainerWidth,r=this.containerHeight,a=this.minContainerHeight,s=this.maxContainerHeight;this.containerWidth=l.a.clamp(e.containerWidth||t,i,n),this.containerHeight=l.a.clamp(e.containerHeight||r,a,s)},setContainerSize:function(e){var t=this,i=e.pageX,n=e.pageY;requestAnimationFrame((function(){if(!l.a.isNull(t.startResizeX)&&!l.a.isNull(t.startResizeWidth)&&!l.a.isNull(t.startResizeY)&&!l.a.isNull(t.startResizeHeight)){var e=2*(i-t.startResizeX)+t.startResizeWidth,r=2*(n-t.startResizeY)+t.startResizeHeight;t.resizeContainer({containerWidth:e,containerHeight:r})}}))},startResize:function(e){this.startResizeX=e.pageX,this.startResizeY=e.pageY,this.startResizeWidth=this.containerWidth,this.startResizeHeight=this.containerHeight,document.addEventListener("mousemove",this.setContainerSize),document.addEventListener("mouseup",this.stopResize),window.addEventListener("mouseleave",this.stopResize),window.addEventListener("click",this.stopResize),window.addEventListener("contextmenu",this.stopResize)},stopResize:function(){this.startResizeX=null,this.startResizeY=null,this.startResizeWidth=null,this.startResizeHeight=null,document.removeEventListener("mousemove",this.setContainerSize),document.removeEventListener("mouseup",this.stopResize),window.removeEventListener("mouseleave",this.stopResize),window.removeEventListener("click",this.stopResize),window.removeEventListener("contextmenu",this.stopResize)},autoResize:function(){var e=this.isMinContainerWidth&&this.isMinContainerHeight;this.resizeContainer({containerWidth:e?this.maxContainerWidth:this.minContainerWidth,containerHeight:e?this.maxContainerHeight:this.minContainerHeight})}},beforeMount:function(){var e=this,t=function(){e.innerWidth=document.body.offsetWidth,e.onInputFocus||(e.innerHeight=innerHeight)};t(),window.addEventListener("resize",t),setInterval(t,1e3)}},m=(i("ac1f"),i("1276"),i("cb29"),i("99af"),i("e9c4"),{watch:{themeHash:{immediate:!0,handler:function(){var e=this,t=new Image,i=location.pathname.split("/")[1];t.src="/".concat(i,"/icon.svg"),t.addEventListener("load",(function(){[16,32].forEach((function(i){var n,r=document.createElement("canvas");r.height=i,r.width=i;var a=r.getContext("2d");a.beginPath(),a.drawImage(t,0,0,i,i),a.globalCompositeOperation="source-in",a.rect(0,0,i,i),a.fillStyle=null===(n=e.themeSpecial)||void 0===n?void 0:n.normal,a.fill();var s=document.querySelector('link[sizes="'.concat(i,"x").concat(i,'"]'));s.setAttribute("href",r.toDataURL())}))}))}}},computed:Object(s["a"])(Object(s["a"])({},Object(d["c"])(["themeSpecial","themeMain"])),{},{themeHash:function(){return JSON.stringify(this.themeSpecial)+JSON.stringify(this.themeMain)}})}),f={computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(d["e"])(["projectKey"])),Object(d["e"])({minisLang:function(e){return e.minis.minisLang},translateJSON:function(e){return e.minis.translateJSON}})),{},{translateOfMinis:function(e){var t=e.translateJSON,i=e.minisLang,n=e.projectKey;return l.a.get(null===t||void 0===t?void 0:t[i],n,{})},translateErrorMessage:function(e){var t=e.translateJSON,i=e.minisLang;return l.a.get(null===t||void 0===t?void 0:t[i],"default.error","%err%")},translate:function(e){var t=e.translateErrorMessage,i=e.translateOfMinis;return function(e,n){return l.a.get(i,e,n||t)}},translateDef:function(e){var t=e.translateJSON,i=e.minisLang,n=e.translateErrorMessage;return function(e,r){var a;return l.a.get(null===t||void 0===t||null===(a=t[i])||void 0===a?void 0:a.default,e,r||n)}},translateChain:function(e){var t=e.translateJSON,i=e.minisLang,n=e.translateErrorMessage;return function e(t,i,r){var a=i||l.a.isNumber(i)?l.a.get(t,i,r||n):t;return function(t,i){return t?e(a,t,i):a}}(null===t||void 0===t?void 0:t[i])}})},v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon",attrs:{"area-text":e.text,side:e.side},on:{click:function(t){return e.$emit("click",t)}}},[i("i",{class:["fi fi-"+e.border+"-"+e.type,{rotate:e.rotate}],style:{fontSize:e.size+"px",maxHeight:e.size+"px",maxWidth:e.size+"px",lineHeight:1}})])},g=[],y=(i("a9e3"),{name:"Icon",props:{type:String,size:{type:Number,default:20},border:{type:String,default:"rs"},text:String,side:{type:String,default:"left"},rotate:{type:Boolean,default:!1}}}),b=y,x=(i("e59a"),i("2877")),w=Object(x["a"])(b,v,g,!1,null,"27d701bb",null),S=w.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings",class:{isClosedSettings:e.value}},[i("Icon",{attrs:{type:"settings",size:22},on:{click:function(t){return t.preventDefault(),e.$emit("input",!e.value)}}}),i("Icon",{attrs:{type:e.themeIcon,size:22},on:{click:function(t){return t.preventDefault(),e.$emit("switchTheme","main")}}}),i("Icon",{attrs:{type:"palette",size:22},on:{click:function(t){return t.preventDefault(),e.$emit("switchTheme","special")}}}),i("Icon",{attrs:{type:"globe",size:22},on:{click:function(t){return t.preventDefault(),e.$emit("switchLang")}}}),i("Icon",{attrs:{type:"expand-arrows-alt",size:22},on:{click:function(t){return t.preventDefault(),e.$emit("switchFullscreen")}}})],1)},k=[],O={name:"SettingsDesktop",components:{Icon:S},props:{themeIcon:String,value:Boolean}},C=O,E=(i("f937"),Object(x["a"])(C,R,k,!1,null,"cd2b87c0",null)),H=E.exports,M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings",class:{isClosedSettings:e.value}},[i("Icon",{attrs:{type:e.themeIcon,size:30},on:{click:function(t){return t.preventDefault(),e.$emit("switchTheme","main")}}}),i("Icon",{attrs:{type:"palette",size:30},on:{click:function(t){return t.preventDefault(),e.$emit("switchTheme","special")}}}),i("Icon",{attrs:{type:"globe",size:30},on:{click:function(t){return t.preventDefault(),e.$emit("switchLang")}}}),e.isWidthMore768?i("Icon",{attrs:{type:"compress-alt",size:30},on:{click:function(t){return t.preventDefault(),e.$emit("switchFullscreen")}}}):e._e(),i("a",{staticClass:"minis",attrs:{href:"https://adequm.github.io/minis",target:"_blank"}},[i("Icon",{attrs:{type:"home",size:30}})],1)],1)},z=[],N={name:"SettingsMobile",components:{Icon:S},props:{themeIcon:String,value:Boolean,isWidthMore768:Boolean}},I=N,j=(i("72b7"),Object(x["a"])(I,M,z,!1,null,"0335f584",null)),P=j.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.value?i("div",{staticClass:"modal"},[i("div",{staticClass:"modal__background",style:{borderRadius:e.isRoundedBorder?"10px":0},on:{click:function(t){return e.$emit("input",null)}}}),i("div",{staticClass:"modal__content"},[e._t("default")],2)]):e._e()},D=[],T={name:"AppModal",props:{value:String,isRoundedBorder:Boolean}},W=T,F=(i("d645"),Object(x["a"])(W,$,D,!1,null,"50be267c",null)),A=F.exports,B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"minis__content",style:{minHeight:e.appHeight+"px",gridTemplateRows:e.gridTemplateRows}},[i("Navigation",{attrs:{isDesktop:e.isDesktop,isModeEditor:e.isModeEditor,isExistRepository:!!e.globalRepositorySize&&!!e.lodash.size(e.renderVariablesArray[e.slideIndexEditor]),isGenerated:e.isGenerated},on:{openModal:function(t){return e.$emit("openModal",t)},switchModeEditor:function(t){e.isModeEditor=!e.isModeEditor},generate:function(t){return e.generateDocx(e.repositoryArray)}}}),i("div",{staticClass:"minis__display"},[e.isModeEditor?i("LayoutEditor",{attrs:{appWidth:e.appWidth,appHeight:e.appHeight,bodyHeight:e.bodyHeight,slideIndex:e.slideIndexEditor,isVariablesMode:!1,delimiterStart:e.delimiterStart,delimiterEnd:e.delimiterEnd,globalRepositoryPath:e.globalRepositoryPath,renderVariablesArray:e.renderVariablesArray},on:{changeSlide:function(t){e.slideIndexEditor=t},deleteRenderVariable:e.deleteRenderVariable,addRenderVariable:e.addRenderVariable,removeEditorHistory:function(t){return e.removeEditorHistory(e.slideIndexEditor)},addEditorHistory:e.addEditorHistory,updatePage:e.updatePage}}):i("LayoutFiles",{attrs:{appWidth:e.appWidth,appHeight:e.appHeight,bodyHeight:e.bodyHeight,repositoryArray:e.repositoryArray,globalRepositoryPath:e.globalRepositoryPath,globalRepositoryHash:e.globalRepositoryHash,globalRepositorySize:e.globalRepositorySize},on:{addFilesToGlobalRepository:e.addFilesToGlobalRepository,deleteFileFromGlobalRepository:e.deleteFileFromGlobalRepository,updateGlobalRepositoryPath:e.updateGlobalRepositoryPath}})],1)],1)},L=[],J=(i("d81d"),i("ddb0"),i("5319"),i("b0c0"),i("3ca3"),i("547c")),V=i.n(J),G=i("c4e3"),K=i.n(G),q=i("fbf9"),X=i.n(q),Y=i("21a6"),U={data:function(){return{isConvertDocToDocx:!1,isGenerated:!1,archiveJSON:{},convertsRenderVariables:{}}},computed:Object(s["a"])({},Object(d["e"])(["delimiterStart","delimiterEnd","renderVariables","renderVariablesArray"])),methods:{generateDocx:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:[],i.prev=1,t.isGenerated=!0,i.next=5,t.getConvertRenderVariables();case 5:return i.next=7,t.addToArchiveJSON(n);case 7:return i.next=9,t.zipArchive(new K.a,t.archiveJSON);case 9:return r=i.sent,i.next=12,r.generateAsync({type:"blob"});case 12:a=i.sent,Object(Y["saveAs"])(a,"".concat(Date.now(),".zip")),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](1),console.error("generateDocx: ",i.t0);case 19:return i.prev=19,t.isGenerated=!1,i.finish(19);case 22:case"end":return i.stop()}}),i,null,[[1,16,19,22]])})))()},getConvertRenderVariables:function(){var e=this.renderVariablesArray[this.slideIndexEditor],t=l.a.chain(e).map(l.a.values).fromPairs().value(),i=this.delimiterStart,r=this.delimiterEnd,a=new Proxy(t,{get:function(e,t){var n="string"==typeof t?i+t+r:t;return t in e?e[t]:n}});n["default"].set(this,"convertsRenderVariables",a)},convertDocToDocx:function(e,t){return new Promise(function(){var i=Object(c["a"])(regeneratorRuntime.mark((function i(n){var r,a,s,o,l,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,a=ConvertApi.auth({secret:"MVr5O4MfBxWNyK0U"}),s=a.createParams(),s.add("File",t.file),i.next=6,a.convert("doc","docx",s);case 6:if(o=i.sent,l=null===o||void 0===o||null===(r=o.files)||void 0===r?void 0:r[0].Url,l){i.next=10;break}throw"Empty [link]";case 10:return i.next=12,new Promise((function(e){return fetch(l).then((function(e){return e.blob()})).then(e)}));case 12:c=i.sent,c&&(e=e.replace(/,doc$/,",docx"),t.file=c,t.fullname=t.fullname.replace(/\.doc$/,".docx"),t.ext="docx"),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),console.error("convertDocToDocx: ",i.t0);case 19:return i.prev=19,n({name:e,data:t}),i.finish(19);case 22:case"end":return i.stop()}}),i,null,[[0,16,19,22]])})));return function(e){return i.apply(this,arguments)}}())},convertTemplate:function(e){var t=this;return new Promise(function(){var i=Object(c["a"])(regeneratorRuntime.mark((function i(n,r){var a,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("docx"!=e.ext){i.next=18;break}return i.prev=1,s=new FileReader,s.readAsBinaryString(e.file),s.onerror=console.error,i.next=7,new Promise((function(e){return s.onload=e}));case 7:return o=i.sent,i.next=10,t.convertTemplateDocx(o);case 10:a=i.sent,i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](1),r(i.t0);case 16:i.next=19;break;case 18:a=e.file;case 19:n(a);case 20:case"end":return i.stop()}}),i,null,[[1,13]])})));return function(e,t){return i.apply(this,arguments)}}())},convertTemplateDocx:function(e){try{var t=e.target.result,i=new V.a(t),n=this.delimiterStart,r=this.delimiterEnd,a={delimiters:{start:n,end:r},paragraphLoop:!0,linebreaks:!0},s=new X.a(i,a);s.render(this.convertsRenderVariables);var o="application/vnd.openxmlformats-officedocument.wordprocessingml.document";return s.getZip().generate({type:"blob",mimeType:o})}catch(l){console.error("Docxtemplater: ",l)}},addToArchiveJSON:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise(function(){var n=Object(c["a"])(regeneratorRuntime.mark((function n(r){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=l.a.map(t,(function(t){var n=Object(u["a"])(t,2),r=n[0],a=n[1];return new Promise(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var s,o,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.isFile){t.next=21;break}if("doc"!==a.ext||!e.isConvertDocToDocx){t.next=7;break}return t.next=4,e.convertDocToDocx(r,a);case 4:s=t.sent,r=s.name,a=s.data;case 7:return t.prev=7,t.next=10,e.convertTemplate(a);case 10:o=t.sent,c=a.fullname.replace(/\./g,","),u=i?"".concat(i,".").concat(c):c,l.a.set(e.archiveJSON,u,o),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](7),console.dir("FileReader, convert: ",t.t0);case 19:t.next=24;break;case 21:return d=i?"".concat(i,".").concat(r):r,t.next=24,e.addToArchiveJSON(l.a.entries(a),d);case 24:n();case 25:case"end":return t.stop()}}),t,null,[[7,16]])})));return function(e){return t.apply(this,arguments)}}())})),n.next=3,Promise.all(a);case 3:r();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},zipArchive:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise(function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(a){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=l.a.map(t,(function(t,r){return new Promise(function(){var a=Object(c["a"])(regeneratorRuntime.mark((function a(s){var o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=r.replace(/,/g,"."),c=n?"".concat(n,"/").concat(o):o,!l.a.isPlainObject(t)){a.next=7;break}return a.next=5,i.zipArchive(e,t,c);case 5:a.next=9;break;case 7:return a.next=9,e.file(c,t,{createFolders:!0});case 9:s();case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())})),r.next=3,Promise.all(s);case 3:a(e);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}},Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layout swiper-horizontal",attrs:{id:"layout-editor"}},[i("div",{staticClass:"input_files_container"},[i("AppInputFiles",{attrs:{id:"1",placeholder:e.translate("files.inputs.files.placeholder"),icon:"add-document",multiple:""},on:{upload:function(t){return e.$emit("addFilesToGlobalRepository",t.target.files)}}}),i("AppInputFiles",{attrs:{id:"2",placeholder:e.translate("files.inputs.folders.placeholder"),icon:"add-folder",allowdirs:"",directory:"",webkitdirectory:""},on:{upload:function(t){return e.$emit("addFilesToGlobalRepository",t.target.files)}}})],1),i("div",{staticClass:"layout__display"},[i("div",{staticClass:"layout__display_content"},[i("Swiper",{ref:"swiper"},[i("SwiperSlide",[i("div",{staticClass:"slide__container",style:{height:e.slideHeight+"px"}},[e.globalRepositorySize?i("DisplayFiles",{key:e.globalRepositoryHash,attrs:{data:e.repositoryArray,path:e.globalRepositoryPath,displayWidth:e.appWidth-40},on:{back:function(t){return e.$emit("updateGlobalRepositoryPath")},folder:function(t){return e.$emit("updateGlobalRepositoryPath",t)},remove:function(t){return e.$emit("deleteFileFromGlobalRepository",t)}}}):i("DisplayEmpty",{attrs:{text:e.translate("files.displays.empty.title"),icon:"folder"}})],1)])],1)],1)])])},Q=[],ee=i("d7cf"),te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"empty__container"},[i("Icon",{attrs:{type:e.icon,size:96,strokeWidth:1}}),i("span",{domProps:{textContent:e._s(e.text)}}),e.button?i("button",{domProps:{textContent:e._s(e.button)},on:{click:function(t){return e.$emit("click")}}}):e._e()],1)},ie=[],ne={name:"DisplayEmpty",components:{Icon:S},props:{text:String,icon:String,button:[String,Number,Boolean]}},re=ne,ae=(i("7f01"),Object(x["a"])(re,te,ie,!1,null,"8a42ca06",null)),se=ae.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-scroll"},[i("div",{staticClass:"chunk",style:{gridTemplateColumns:"repeat("+e.columnsRepeat+", minmax(170px, 1fr))"}},[i("div",{staticClass:"chunk_item chunk_item-first colorful",style:{gridColumnEnd:e.columnsRepeat+1},on:{click:function(t){return e.$emit("back")}}},[i("span",{domProps:{textContent:e._s(e.pathLink)}}),i("div",{staticClass:"chunk_item_icons"},[i("span",{staticStyle:{"margin-right":"3px"},domProps:{textContent:e._s(e.lodash.size(e.data))}}),i("Icon",{attrs:{type:"arrow-down",size:16}})],1)]),e._l(e.data,(function(t){var n=t[0],r=t[1];return i("div",{key:n,staticClass:"chunk_item",class:{colorful:!r.isFile},on:{click:function(t){!r.isFile&&e.$emit("folder",n)}}},[i("span",{domProps:{textContent:e._s(e.getName(r,n))}}),i("div",{staticClass:"chunk_item_icons"},[r.isFile?e._e():i("span",{staticStyle:{"margin-right":"3px"},domProps:{textContent:e._s(e.lodash.size(r))}}),i("Icon",{attrs:{type:"trash",size:16},on:{click:function(t){return t.stopPropagation(),e.$emit("remove",n)}}})],1)])}))],2)])},le=[],ce={name:"DisplayFiles",components:{Icon:S},props:{data:Array,path:String,displayWidth:Number},data:function(){return{lodash:l.a}},computed:{columnsRepeat:function(){var e=l.a.size(this.data),t=Math.floor((this.displayWidth-10*(e+1))/170);return Math.min(t,e)},pathLink:function(){var e="...";return this.path&&(e+="/"+this.path.replace(/\./g,"/")),e}},methods:{getName:function(e,t){return e.isFile?e.fullname:"".concat(t,"/")}}},ue=ce,de=(i("a7bf"),Object(x["a"])(ue,oe,le,!1,null,"b178e95a",null)),pe=de.exports,he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{on:{submit:function(e){e.preventDefault()},drop:function(t){return t.stopPropagation(),t.preventDefault(),e.drop.apply(null,arguments)},dragenter:function(e){e.preventDefault()},dragover:function(e){e.preventDefault()}}},[i("input",{ref:"input",attrs:{type:"file",name:"files_"+e.id,id:"files_"+e.id,multiple:e.multiple,allowdirs:e.allowdirs,directory:e.directory,webkitdirectory:e.webkitdirectory},on:{change:function(t){return e.$emit("upload",t)}}}),i("label",{attrs:{for:"files_"+e.id}},[i("Icon",{attrs:{type:e.icon}}),i("span",{domProps:{textContent:e._s(e.placeholder)}})],1)])},me=[],fe={name:"AppInputFiles",components:{Icon:S},props:{id:String,placeholder:String,icon:String,multiple:Boolean,allowdirs:Boolean,directory:Boolean,webkitdirectory:Boolean},methods:{focus:function(){this.$refs.input.focus()},drop:function(e){"getFilesAndDirectories"in e.dataTransfer&&(console.log("start"),e.dataTransfer.getFilesAndDirectories().then(console.log))}}},ve=fe,ge=(i("6895"),Object(x["a"])(ve,he,me,!1,null,"c46acc12",null)),ye=ge.exports,be={name:"LayoutFiles",mixins:[f],components:{AppInputFiles:ye,DisplayEmpty:se,DisplayFiles:pe,Swiper:ee["Swiper"],SwiperSlide:ee["SwiperSlide"]},props:{appWidth:Number,appHeight:Number,bodyHeight:Number,repositoryArray:Array,globalRepositoryHash:Number,globalRepositorySize:Number,globalRepositoryPath:String},data:function(){return{lodash:_,swiperRef:null,slideHeight:0}},watch:{appWidth:["setSlideWidth","setSlideHeight"],appHeight:["setSlideWidth","setSlideHeight"],bodyHeight:{immediate:!0,handler:"setSlideHeight"}},methods:{setSlideHeight:function(){var e=this;this.$nextTick((function(){var t,i,n;e.slideHeight=null===(t=e.$refs)||void 0===t||null===(i=t.swiper)||void 0===i||null===(n=i.$el)||void 0===n?void 0:n.offsetHeight}))},setSlideWidth:function(){var e=this,t=this.appWidth-40,i=document.querySelector("#layout-editor .swiper-wrapper");_.invoke(null===i||void 0===i?void 0:i.style,"setProperty","max-width","".concat(t,"px"));var n=document.querySelectorAll("#layout-editor .swiper-slide");[].forEach.call(n,(function(i,n){i.style.setProperty("width","".concat(t,"px")),e.swiperRef.slidesGrid[n]=n*t,e.swiperRef.snapGrid[n]=n*t,e.swiperRef.slidesSizesGrid[n]=t}))}},mounted:function(){this.swiperRef=this.$refs.swiper.swiperRef,this.$nextTick(this.setSlideWidth)}},xe=be,we=(i("7829"),Object(x["a"])(xe,Z,Q,!1,null,"5e75001f",null)),Se=we.exports,Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layout swiper-horizontal",attrs:{id:"layout-editor"}},[i("AppTextarea",{ref:"textarea",staticStyle:{"margin-bottom":"10px"},attrs:{resize:e.appWidth,value:e.isVariablesMode?e.valueKey:e.valueResult,placeholder:e.textareaPlaceholder,title:e.textareaTitle,titlePrepend:e.textareaTitlePrepend},on:{input:e.inputTextarea,submit:e.submitTextarea,updateInputFocus:function(t){return e.$emit("updateInputFocus",t)},clickToTitle:function(t){e.$refs.textarea.focus()&&(e.isVariablesMode=!e.isVariablesMode)}}}),i("div",{staticClass:"layout__display",class:{isEnd:e.isEnd,isBeginning:e.isBeginning}},[i("div",{staticClass:"layout__display_content"},[i("Swiper",{ref:"swiper",on:{activeIndexChange:function(t){return e.$emit("changeSlide",t.realIndex)}}},[e.lodash.size(e.renderVariablesArray)?e._l(e.renderVariablesArray,(function(t,n){return i("SwiperSlide",{key:n},[i("div",{staticClass:"slide__container",style:{height:e.slideHeight+"px"}},[t.length?i("DisplayEditor",{attrs:{chunk:t},on:{remove:e.deleteVariable,edit:e.editVariable}}):i("DisplayEmpty",{attrs:{text:e.translate("editor.displays.empty.title"),icon:"notebook"}})],1)])})):i("SwiperSlide",[i("div",{staticClass:"slide__container",style:{height:e.slideHeight+"px"}},[i("DisplayEmpty",{attrs:{text:e.translate("editor.displays.empty.title"),icon:"notebook"}})],1)])],2)],1),i("SlideButtons",{attrs:{limit:e.slideList.length,isBeginning:e.isBeginning,isEnd:e.isEnd,value:e.slideIndex,showCenterButton:!0,centerButtonDisabled:!e.lodash.size(e.renderVariablesArray[0]),centerButtonIcon:e.slideIndex?"trash":"disk",centerButtonSize:14},on:{input:function(t){return e.$emit("changeSlide",t)},clickToCenterButton:e.clickToCenterButton}})],1)],1)},ke=[],Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container-scroll"},e._l(e.chunk,(function(t,n){var r=t.key,a=t.value;return i("div",{key:r+"_"+n,staticClass:"item"},[i("span",{staticClass:"item__key",domProps:{textContent:e._s(r)}}),i("span",{staticClass:"item__text",domProps:{textContent:e._s(a)}}),i("div",{staticClass:"item__icons"},[i("Icon",{attrs:{type:"edit",size:16},on:{click:function(t){return e.$emit("edit",{key:r,value:a})}}}),i("Icon",{attrs:{type:"trash",size:16},on:{click:function(t){return e.$emit("remove",{key:r})}}})],1)])})),0)},_e=[],Ce={name:"DisplayEditor",components:{Icon:S},props:{chunk:Array}},Ee=Ce,He=(i("1c7c"),Object(x["a"])(Ee,Oe,_e,!1,null,"1f9cf746",null)),Me=He.exports,ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"slide-buttons__container"},[i("button",{staticClass:"slide-button",attrs:{disabled:e.startDisabled},on:{click:function(t){e.$emit("slidePrev")&&e.setSlide(-1)}}},[i("Icon",{attrs:{type:"angle-double-small-left"}})],1),e.showCenterButton&&e.centerButtonIcon?i("button",{staticClass:"slide-button slide-button-center",style:{color:e.centerButtonColor},attrs:{disabled:e.centerButtonDisabled},on:{click:function(t){return e.$emit("clickToCenterButton")}}},[i("Icon",{attrs:{type:e.centerButtonIcon,size:e.centerButtonSize}})],1):e._e(),i("button",{staticClass:"slide-button",attrs:{disabled:e.endDisabled},on:{click:function(t){e.$emit("slideNext")&&e.setSlide(1)}}},[i("Icon",{attrs:{type:"angle-double-small-right"}})],1)])},Ne=[],Ie={name:"SlideButtons",components:{Icon:S},props:{value:{type:Number,default:0},limit:{type:Number,default:0},isEnd:{type:Boolean,default:null},isBeginning:{type:Boolean,default:null},showCenterButton:Boolean,centerButtonDisabled:Boolean,centerButtonIcon:String,centerButtonSize:{type:Number,default:function(){return 20}},centerButtonColor:String},computed:{startDisabled:function(e){return l.a.isBoolean(e.isBeginning)&&e.isBeginning},endDisabled:function(e){return l.a.isBoolean(e.isEnd)&&e.isEnd}},methods:{setSlide:function(e){var t=l.a.clamp(this.value+e,0,this.limit-1);this.$emit("input",t)}}},je=Ie,Pe=(i("52cb"),Object(x["a"])(je,ze,Ne,!1,null,"2643f4c0",null)),$e=Pe.exports,De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"textarea",style:{height:e.textareaHeight}},[i("form",{style:{height:e.textareaHeight},attrs:{defaultfocus:"textarea"},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[i("textarea",{ref:"textarea",attrs:{id:"textarea",rows:e.textareaRows,placeholder:e.placeholder,maxlength:"80"},domProps:{value:e.value},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.textareaKeyDownEnter.apply(null,arguments)},input:function(t){return e.$emit("input",t.target.value)},focus:function(t){return e.$emit("updateInputFocus",!0)},blur:function(t){return e.$emit("updateInputFocus",!1)}}}),e._v(" "),e.title?i("div",{staticClass:"textarea-title",domProps:{textContent:e._s(e.titlePrepend?e.titlePrepend+": "+e.title:e.title)},on:{click:function(t){return e.$emit("clickToTitle")}}}):e._e(),i("button",{attrs:{type:"submit"}},[i("Icon",{attrs:{type:"plus-small"}})],1)])])},Te=[],We=(i("fb6a"),i("498a"),{name:"AppTextarea",components:{Icon:S},props:{placeholder:String,titlePrepend:String,title:String,value:String,resize:Number},data:function(){return{textareaRows:1}},watch:{value:"setMaxTextareaRows",resize:"setMaxTextareaRows"},computed:{textareaHeight:function(){var e="".concat(this.textareaRows,"em"),t="".concat(.2*this.textareaRows,"em");return"calc(".concat(e," + ").concat(t," + 30px)")}},methods:{setMaxTextareaRows:function(){var e=this;this.textareaRows=1,this.$nextTick((function(){var t=e.$refs.textarea.scrollHeight,i=Math.ceil((t-28)/19);i>5&&e.$emit("input",e.value.slice(0,-1)),e.textareaRows=Math.max(1,Math.min(5,i))}))},textareaKeyDownEnter:function(e){e.shiftKey||(e.preventDefault(),this.submit())},focus:function(){return this.$refs.textarea.focus(),this},submit:function(){this.value.replace(/\n/g,"")&&this.$emit("submit",this.value.trim().replace(/\n+$/,""))}}}),Fe=We,Ae=(i("41e8"),Object(x["a"])(Fe,De,Te,!1,null,"a7573578",null)),Be=Ae.exports,Le={name:"LayoutEditor",mixins:[f],components:{SlideButtons:$e,AppTextarea:Be,DisplayEditor:Me,DisplayEmpty:se,Swiper:ee["Swiper"],SwiperSlide:ee["SwiperSlide"]},props:{appWidth:Number,appHeight:Number,bodyHeight:Number,delimiterStart:String,delimiterEnd:String,renderVariablesArray:Array,slideIndex:Number},data:function(){return{lodash:_,swiperRef:null,slideHeight:0,valueKey:null,valueResult:null,isVariablesMode:!0}},watch:{appWidth:["setSlideWidth","setSlideHeight"],appHeight:["setSlideWidth","setSlideHeight"],slideIndex:function(e){this.swiperRef.slideTo(e),this.setSlideWidth()},bodyHeight:{immediate:!0,handler:"setSlideHeight"},valueKey:["setSlideHeight"],valueResult:["setSlideHeight"]},computed:{isEnd:function(){var e=this.slideIndex===this.slideList.length-1;return!!this.swiperRef&&this.swiperRef.isEnd||e},isBeginning:function(){var e=0===this.slideIndex;return!!this.swiperRef&&this.swiperRef.isBeginning||e},slideList:function(){var e;return(null===(e=this.swiperRef)||void 0===e?void 0:e.slides)||[]},textareaTitle:function(){var e=this.delimiterStart+this.valueKey+this.delimiterEnd;return this.isVariablesMode?this.valueResult:this.valueKey&&e},textareaPlaceholder:function(){return this.isVariablesMode?this.translate("editor.textareas.placeholders.key"):this.translate("editor.textareas.placeholders.value")},textareaTitlePrepend:function(){return this.isVariablesMode?this.translate("editor.textareas.placeholders.value"):this.translate("editor.textareas.placeholders.key")}},methods:{setSlideHeight:function(){var e=this;this.$nextTick((function(){var t,i,n,r;e.slideHeight=null===(t=e.$refs)||void 0===t||null===(i=t.swiper)||void 0===i||null===(n=i.$el)||void 0===n||null===(r=n.parentElement)||void 0===r?void 0:r.offsetHeight}))},setSlideWidth:function(){var e=this,t=this.appWidth-40,i="translate3d(-".concat(this.slideIndex*t,"px, 0px, 0px)"),n=document.querySelector("#layout-editor .swiper-wrapper");_.invoke(null===n||void 0===n?void 0:n.style,"setProperty","max-width","".concat(t,"px")),_.invoke(null===n||void 0===n?void 0:n.style,"setProperty","transform",i);var r=document.querySelectorAll("#layout-editor .swiper-slide");[].forEach.call(r,(function(i,n){i.style.setProperty("width","".concat(t,"px")),e.swiperRef.slidesGrid[n]=n*t,e.swiperRef.snapGrid[n]=n*t,e.swiperRef.slidesSizesGrid[n]=t}))},inputTextarea:function(e){this.isVariablesMode?this.valueKey=e:this.valueResult=e},submitTextarea:function(e){this.isVariablesMode=!this.isVariablesMode,this.valueKey&&this.valueResult&&(this.$emit("addRenderVariable",{index:this.slideIndex,value:this.valueResult,key:this.valueKey}),this.valueKey="",this.valueResult=""),this.$nextTick(this.setSlideWidth)},deleteVariable:function(e,t){var i=e.key;if(this.$emit("deleteRenderVariable",{key:i,index:this.slideIndex}),!t){var n=_.size(this.renderVariablesArray)-1,r=_.clamp(this.slideIndex,0,n);this.$emit("changeSlide",r),this.$emit("updatePage")}},editVariable:function(e){var t=e.key,i=e.value;this.deleteVariable({key:t},!0),this.valueKey=t,this.valueResult=i,this.$refs.textarea.focus(),this.isVariablesMode=!1},clickToCenterButton:function(){if(this.slideIndex){this.$emit("removeEditorHistory");var e=_.size(this.renderVariablesArray)-1,t=_.clamp(this.slideIndex,0,e);this.$emit("changeSlide",t)}else{if(!_.size(this.renderVariablesArray[0]))return;this.$emit("addEditorHistory"),this.$emit("changeSlide",1)}this.$emit("updatePage")}},mounted:function(){this.swiperRef=this.$refs.swiper.swiperRef,this.swiperRef.slideTo(this.slideIndex,0),this.$nextTick(this.setSlideWidth)}},Je=Le,Ve=(i("a47a"),Object(x["a"])(Je,Re,ke,!1,null,"59151769",null)),Ge=Ve.exports,Ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navigation"},[i("button",{staticClass:"navigation__item",domProps:{textContent:e._s(e.pageName)},on:{click:function(t){return e.$emit("switchModeEditor")}}}),e.isDesktop?e._e():i("button",{staticClass:"navigation__item navigation__item-settings nofocus nohover",on:{click:function(t){return e.$emit("openModal","settings")}}},[i("Icon",{attrs:{type:"settings"}})],1),i("button",{staticClass:"navigation__item navigation__item-special",attrs:{disabled:!e.isExistRepository},on:{click:function(t){e.isExistRepository&&!e.isGenerated&&e.$emit("generate")}}},[e.isGenerated?i("Icon",{attrs:{type:"time-oclock",rotate:""}}):i("Icon",{attrs:{type:"paper-plane"}})],1)])},qe=[],Xe={name:"Navigation",mixins:[f],components:{Icon:S},props:{isDesktop:Boolean,isModeEditor:Boolean,isExistRepository:Boolean,isGenerated:Boolean},data:function(){return{lodash:l.a}},computed:{pageName:function(){return this.isModeEditor?this.translate("files.title"):this.translate("editor.title")}}},Ye=Xe,Ue=(i("97c5"),Object(x["a"])(Ye,Ke,qe,!1,null,"6f9d49da",null)),Ze=Ue.exports,Qe={name:"LayoutContent",mixins:[U],components:{Icon:S,LayoutFiles:Se,LayoutEditor:Ge,AppInputFiles:ye,Navigation:Ze},props:{appWidth:Number,appHeight:Number,bodyHeight:Number,isDesktop:Boolean,isWidthMore768:Boolean},data:function(){return{lodash:l.a,isModeEditor:!1,slideIndexEditor:0}},computed:Object(s["a"])(Object(s["a"])({},Object(d["e"])(["repositoryArray","delimiterStart","delimiterEnd","renderVariablesArray","globalRepositoryPath","globalRepositoryHash","globalRepositorySize"])),{},{gridTemplateRows:function(){var e=Math.min(.15*this.appHeight,85),t=this.appHeight-e;return"".concat(e,"px ").concat(t,"px")}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(d["b"])(["addFilesToGlobalRepository","deleteFileFromGlobalRepository","updateGlobalRepositoryPath"])),Object(d["d"])(["addRenderVariable","deleteRenderVariable","removeEditorHistory","addEditorHistory"])),{},{keydown:function(e){var t=e.key;e.shiftKey;switch(t){case"Escape":this.$emit("switchSettings");break}},updatePage:function(){var e=this,t=this.isModeEditor;this.isModeEditor=!t,this.$nextTick((function(){return e.isModeEditor=t}))}}),beforeMount:function(){document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},et=Qe,tt=(i("e133"),Object(x["a"])(et,B,L,!1,null,null,null)),it=tt.exports,nt={components:{LayoutContent:it,AppModal:A,SettingsDesktop:H,SettingsMobile:P,Icon:S},mixins:[p,h,m,f],data:function(){return{lodash:l.a,isClosedSettings:!0,openedModalName:null,slideIndexHistory:0}},watch:{isDesktop:function(e){e&&"settings"==this.openedModalName&&(this.openedModalName=null,this.isClosedSettings=!1)}},methods:Object(s["a"])({},Object(d["d"])(["switchFullscreen"])),beforeMount:function(){var e=this;document.body.addEventListener("click",(function(t){document.body===t.path[0]&&e.isDesktop&&(e.isClosedSettings||(e.isClosedSettings=!0))}))}},rt=nt,at=(i("5c0b"),Object(x["a"])(rt,r,a,!1,null,null,null)),st=at.exports,ot=i("9483");Object(ot["a"])("".concat("/minis-docx-template/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});i("a15b"),i("2ca0"),i("c740"),i("a434");var lt=i("0e44"),ct=i("0759"),ut=i.n(ct),dt=(i("b64b"),{state:function(){return{minisLang:"ru",minisThemeMain:null,minisThemeSpecial:null,themesJSON:{},translateJSON:{},minisJSON:{}}},getters:{themeMain:function(e){var t,i,n=e.themesJSON,r=e.minisThemeMain,a=null===n||void 0===n||null===(t=n.main)||void 0===t?void 0:t[r];return a?n.main[r]:null===n||void 0===n||null===(i=n.main)||void 0===i?void 0:i.dark},themeSpecialName:function(e){var t,i,n,r=e.themesJSON,a=e.minisThemeSpecial,s=null===r||void 0===r||null===(t=r.special)||void 0===t||null===(i=t.colors)||void 0===i?void 0:i[a];return s?a:null===r||void 0===r||null===(n=r.special)||void 0===n?void 0:n.default},themeSpecial:function(e,t){var i,n,r=e.themesJSON,a=t.themeSpecialName;return null===r||void 0===r||null===(i=r.special)||void 0===i||null===(n=i.colors)||void 0===n?void 0:n[a]}}});dt.mutations={switchTheme:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",i="main"==t?"minisThemeMain":"minisThemeSpecial",r="main"==t?e.themesJSON.main:e.themesJSON.special.colors,a=Object.keys(r),s=a.indexOf(e[i]),o=(s+1)%a.length;n["default"].set(e,i,a[o])},switchLang:function(e){var t=Object.keys(e.translateJSON),i=t.indexOf(e.minisLang),r=(i+1)%t.length;n["default"].set(e,"minisLang",t[r])},initMinis:function(e,t){var i=t.translateJSON,r=t.minisJSON,a=t.themesJSON;n["default"].set(e,"minisJSON",r),n["default"].set(e,"translateJSON",l.a.defaultsDeep(i,{ru:{"docx-template":{title:"Шаблонизатор DOCX",editor:{title:"Редактор"},files:{title:"Файлы"}}}})),n["default"].set(e,"themesJSON",a)}};var pt=dt,ht=location.pathname.split("/")[1],mt={};n["default"].use(d["a"]),mt.state=function(){return{isFullscreen:!1,projectKey:ht.split("-").slice(1).join("-"),delimiterStart:"{{:",delimiterEnd:":}}",globalRepositoryHash:null,globalRepositorySize:null,globalRepositoryPath:null,globalRepository:{},repositoryArray:[],renderVariablesArray:[]}},mt.actions={addFilesToGlobalRepository:function(e,t){var i=e.commit;e.state;l.a.each(t,(function(e,t){if(!e.name.startsWith("~")&&!e.name.startsWith(".")){var n=(e.webkitRelativePath||e.name).replace(/\./g,",").split("/"),r=l.a.last(n).split(","),a=r.join("."),s=l.a.last(r),o=r.slice(0,-1).join("."),c=!0;i("addFileToGlobalRepository",{path:n.join("."),file:{file:e,name:o,ext:s,isFile:c,fullname:a}})}})),i("updateRepositoryArray"),i("updateHash")},updateGlobalRepositoryPath:function(e,t){var i=e.commit,n=e.state,r=l.a.compact(l.a.split(n.globalRepositoryPath,"."));if(t||r.length){var a=t?l.a.join(r.concat(t),"."):l.a.join(r.slice(0,-1),".");i("updateGlobalRepositoryPath",a),i("updateRepositoryArray"),i("updateHash")}},deleteFileFromGlobalRepository:function(e,t){var i=e.commit,n=e.state,r=l.a.chain(n.globalRepositoryPath).split(".").compact().concat(t).join(".").value();i("updateGlobalRepository",l.a.omit(n.globalRepository,r)),i("updateRepositoryArray"),i("updateHash")}},mt.mutations={switchFullscreen:function(e){return n["default"].set(e,"isFullscreen",!e.isFullscreen)},addFileToGlobalRepository:function(e,t){var i=t.path,n=t.file,r=e.globalRepositoryPath?e.globalRepository:e,a=e.globalRepositoryPath||"globalRepository",s=l.a.get(r,a,{});l.a.set(s,i,n),l.a.set(r,a,s)},updateGlobalRepositoryPath:function(e,t){return n["default"].set(e,"globalRepositoryPath",t)},updateGlobalRepository:function(e,t){return n["default"].set(e,"globalRepository",t)},updateHash:function(e){e.globalRepositorySize=l.a.size(e.globalRepository),e.globalRepositoryHash=Date.now()},updateRepositoryArray:function(e){var t=!!e.globalRepositoryPath,i=t?e.globalRepository:e,n=t?e.globalRepositoryPath:"globalRepository";e.repositoryArray=l.a.chain(i).get(n,{}).entries().sortBy("[1].isFile").reverse().value()},addRenderVariable:function(e,t){var i=e.renderVariablesArray,r=t.index,a=t.key,s=t.value,o=l.a.get(i,r,[]);o.push({key:a,value:s}),n["default"].set(i,r,o)},deleteRenderVariable:function(e,t){var i=e.renderVariablesArray,r=t.key,a=t.index,s=l.a.get(i,a);if(s){var o=l.a.findIndex(s,{key:r});if(s.splice(o,1),l.a.size(s))n["default"].set(i,a,s);else{if(!a)return;i.splice(a,1)}}},removeEditorHistory:function(e,t){var i=e.renderVariablesArray;i.splice(t,1)},addEditorHistory:function(e){var t=e.renderVariablesArray;t.unshift([])}};var ft=["minis.minisThemeMain","minis.minisThemeSpecial","minis.minisLang","minis.themesJSON","minis.translateJSON","minis.minisJSON"],vt=["isFullscreen","renderVariablesArray","delimiterStart","delimiterEnd"];mt.modules={minis:pt},mt.plugins=[ut()({predicate:function(){return[].concat(ft,vt)}}),Object(lt["a"])({paths:ft,key:"minis"}),Object(lt["a"])({paths:vt,key:ht})];var gt=new d["a"].Store(mt);n["default"].config.productionTip=!1,new n["default"]({store:gt,render:function(e){return e(st)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";i("9c0c")},6895:function(e,t,i){"use strict";i("e1df")},"72b7":function(e,t,i){"use strict";i("b357")},7829:function(e,t,i){"use strict";i("26d7")},"7f01":function(e,t,i){"use strict";i("d407")},"82b2":function(e,t,i){},"88ab":function(e,t,i){},"931e":function(e,t,i){},"97c5":function(e,t,i){"use strict";i("b7c3")},"98cc":function(e,t,i){},"9c0c":function(e,t,i){},a47a:function(e,t,i){"use strict";i("c91f")},a7bf:function(e,t,i){"use strict";i("931e")},b357:function(e,t,i){},b7c3:function(e,t,i){},c91f:function(e,t,i){},d407:function(e,t,i){},d645:function(e,t,i){"use strict";i("98cc")},e133:function(e,t,i){"use strict";i("eed6")},e1df:function(e,t,i){},e3aa:function(e,t,i){},e509:function(e,t,i){},e59a:function(e,t,i){"use strict";i("e3aa")},edef:function(e,t,i){},eed6:function(e,t,i){},f937:function(e,t,i){"use strict";i("e509")}});
//# sourceMappingURL=app.5d7c7a36.js.map